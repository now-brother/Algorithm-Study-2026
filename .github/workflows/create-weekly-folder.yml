name: Create Weekly Folder

on:
  schedule:
    - cron: '0 0 * * MON'  # ì›”ìš”ì¼ 09:00 KST = 00:00 UTC
  workflow_dispatch:  # ìˆ˜ë™ ì‹¤í–‰

jobs:
  create-folder:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Create weekly folder
        run: |
          # ìŠ¤í„°ë”” ì‹œìž‘ì¼ (2026-02-23 = ì²« ì£¼ ì›”ìš”ì¼)
          START_DATE="2026-02-23"
          
          # í˜„ìž¬ ë‚ ì§œ
          CURRENT_DATE=$(date +%Y-%m-%d)
          
          # ì‹œìž‘ì¼ë¶€í„° ëª‡ ì£¼ì°¨ì¸ì§€ ê³„ì‚°
          START_EPOCH=$(date -d "$START_DATE" +%s)
          CURRENT_EPOCH=$(date -d "$CURRENT_DATE" +%s)
          DIFF_DAYS=$(( ($CURRENT_EPOCH - $START_EPOCH) / 86400 ))
          WEEK_NUM=$(( ($DIFF_DAYS / 7) + 1 ))
          
          FOLDER="wk$(printf %02d $WEEK_NUM)"
          
          # ì´ë¯¸ ìžˆìœ¼ë©´ ìŠ¤í‚µ
          if [ -d "$FOLDER" ]; then
            echo "Folder $FOLDER already exists"
            exit 0
          fi
          
          # í´ë” ìƒì„±
          mkdir -p $FOLDER
          
          # ì´ë²ˆ ì£¼ ì›”ìš”ì¼~ì¼ìš”ì¼ ë‚ ì§œ ê³„ì‚°
          MONDAY=$(date -d "$CURRENT_DATE" +%Y-%m-%d)
          SUNDAY=$(date -d "$CURRENT_DATE + 6 days" +%Y-%m-%d)
          
          # README ìƒì„±
          cat > $FOLDER/README.md << EOF
# ðŸ“… Week $WEEK_NUM ì•Œê³ ë¦¬ì¦˜ ìŠ¤í„°ë”” ëª©í‘œ

## ê°•ë‚˜ì€
### ðŸŽ¯ ëª©í‘œ


## ì‹ ìœ ì§„
### ðŸŽ¯ ëª©í‘œ


## ì´ë‹¤ì—°
### ðŸŽ¯ ëª©í‘œ


## ì•ˆë¯¼í˜
### ðŸŽ¯ ëª©í‘œ


## ì´ì˜í›ˆ
### ðŸŽ¯ ëª©í‘œ


## ì´ìž¬í˜•
### ðŸŽ¯ ëª©í‘œ

EOF
          
          # ì»¤ë°‹ 
          git config user.name "Yujin-Shin-hub"
          git config user.email "sheenie5225@gmail.com"
          git add $FOLDER
          git commit -m "docs: Create week $WEEK_NUM folder [skip ci]"
          git push
